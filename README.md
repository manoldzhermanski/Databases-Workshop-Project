# Тема 3
## Проект по база от данни за верига хотели
## Изготвил: Манол Джермански

### 1. Обхват на модела. Дефиниране на задачата.

Базата от данни за хотел ще се занимава със съхранението на данните за стаите, клиентите, служителите и услугите във верига от хотели.  Хотелът се определя еднозначно от неговото име и локация. Той може да предоставя спа, плувен басейн, паркинг, румсървиз, фитнес, ресторант и WiFi.
Хотела работи с клиенти, за които се пазят лични данни. Всеки гост се определя еднозначно от неговото ЕГН . За него се пази – 3 имена, ЕГН и телефонен номер. Една стая може да има няколко обитатели, но всеки гост си има точно една стая.
Хотелът предлага на клиентите си стаи, определени еднозначно от техния етаж и номер. За всяка стая се пази вид (единична, двойна, тройна, четворна), номер, и статус дали е свободна или заета. Някои стаи имат тераси и вани.
При направата на резервация се пази идентификационен номер на резервацията, цената, за която е предоставена стаята/стаите и периода на престой. Заета стая не може да се предостави на друго лице докато не получи статус свободна. Използването на спа, паркинг и румсървиз води до начисляване на допълнителни такси.
В хотела също работят служители, които се определят еднозначно от служебен номер. За служителите се пазят 3 имена, служебен и телефонен номер. Всеки служител отговаря за определени части на хотела и извършва определени дейности. За един хотел могат да отговарят много служители, но един служител може да отговаря за един хотел.

2. Множества от същности и техните атрибути.

-	Хотел – име, локация , спа, плувен басейн, паркинг, рум сервиз, фитнес, ресторант, WiFi ;
-	Клиенти – 3 имена, ЕГН, телефонен номер ;
-	Стаи – вид, етаж, номер, статус, балкон, вана  ;
-	Резервация – номер на резервация, цена, дата на настаняване, дата на освобождаване, румсървиз, спа, паркинг;
-	Служители – 3 имена, служебен номер, телефонен номер.

### 3.	Домейн на атрибутите

-	Хотел – име : низ, локация: низ, спа:(0 или 1) , плувен басейн : (0 или 1), паркинг: (0 или 1) , рум сервиз: (0 или 1) , фитнес: (0 или 1) , ресторант: (0 или 1) , WiFi: (0 или 1);
-	Клиенти – 3 имена: низ, ЕГН: низ, телефонен номер: низ ;
-	Стаи – вид: низ, етаж: цяло положително число, стая : цяло положително число, статус : (0 или 1), балкон: (0 или 1), вана:             (0 или 1) ;
-	Резервация – номер на резервация: низ, цена: положително число с до 2 знака след десетичната запетая, дана на настаняване: дата, дата на освобождаване: дата, допълнителни такси: цяло положително число, румсървиз: (0 или 1), спа:(0 или 1), паркинг:(0 или 1) ;
-	Служители – 3 имена: низ, служебен номер: низ, телефонен номер: низ .

### 4.	Връзки

-	В един хотел работят много служители. Служителите работят в точно един хотел ;
-	Хотела може да има много стаи. Една стая принадлежи на точно на един хотел ;
-	Една стая може да има много обитатели. Всеки гост е настанен в точно една стая ;
-	Една резервация може да обхваща няколко стаи. За една стая кореспондира точно една резервация.
-	Клиентът може да резервира няколко стаи. Една резервация кореспондира към един човек.

### 5.	Ограничения по единствена стойност, референтна цялостност и друг тип ограничения

-	Хотел – еднозначно определен от името и локацията ;
-	Клиент – еднозначно определен от ЕГН ;
-	Стая – еднозначно определен от етаж, номер на стая и име на хотела;
-	Служител – еднозначно определен от служебен номер ;

### 6.	Правила и проверки

-	Стаи - проверка за наличие на вана ;
-	Стаи - проверка за наличие на балкон;
-	Резервация - проверка дали е използван румсървиз;
-	Резервация - проверка дали е използван паркинг;
-	Резервация - проверка дали е използвано спа;

### 7.	E/R модел на данни

![T3_D2](https://user-images.githubusercontent.com/64347529/121638860-5847c080-ca94-11eb-9c2d-375a14333dc3.png)

### 8.	Релационен модел на данни

Първо преработваме множествата от същности, после връзките много към един.
- Hotel (name, location, parking, swimmingPool, fitness, Wi-Fi, spa, room service, restaurant);
- Staff (staffID, name, position, telNumber);
- Room (hotelName, hotelLocation, floor, number, type, hasBalcony, hasBathTub, status);
- Reservation (reservationID, accommDate, releaseDate, extraPrice, usesSpa, usesParking, usedRoomService);
- Client (PIN, name, telNumber);
- Works (staffID, HotelAdress) X (Оптимизираме)
- HaveA (hotelAdress, floor, number, reservationID, RoomOfferedAs, initialPrice) X (Оптимизираме)
- Books (PIN, reservationID) X (Оптимизираме)

### 9.	Релационен модел на данни(релационни схеми)

Окончателно схемата на базата от данни се състои от следните релационни схеми:
-	Hotel (name, location, parking, swimmingPool, fitness, Wi-Fi, spa, room service, restaurant);
-	Staff (staffID, name, position, telNumber, hotelName,hotelLocation);
-	Room (hotelName, hotelLocation, floor, number, type, hasBalcony, hasBathTub, status);
-	Client (PIN, name, telNumber);
-	Reservation (reservationID, accommDate, releaseDate, extraPrice, usesSpa, usesParking, usedRoomService, clientPIN, hotelName, hotelLocation, roomFloor, roomNumber, roomIsOfferedAs, initialPrice); 

### 10.	ФЗ и Нормализация

-	ФЗ-1: name, location -> parking, swimmingPool, fitness, Wi-Fi, spa, room service, restaurant (Hotel)

-	ФЗ-2: staffID -> name, position, telNumber, hotelAName, hotelLocation (Staff)
-	ФЗ-3: hotelAdress, floor, number -> type, hasBalcony, hasBathTub, status (Room)
-	ФЗ-4: PIN -> name, telNumber (Client)
-	ФЗ-5: reservationID -> accommDate, releaseDate, extraPrice, usesSpa, usesParking, usedRoomService, clientPIN, hotelName, hotelLocation, roomFloor, roomNumber, roomIsOfferedAs, initialPrice (Reservation)

За всички ФЗ на релациите е в сила, че в лявата част се намира суперключ за релацията, следователно всички релации са в НФБК. Не се налага да правим нищо допълнително.

### 11.	Схема на базата от данни

![Screenshot 2021-06-04 10 32 07](https://user-images.githubusercontent.com/64347529/121638724-1f0f5080-ca94-11eb-86e2-59774a830c1a.png)
 
### 12.	Приложения

 ![1](https://user-images.githubusercontent.com/64347529/121639290-018eb680-ca95-11eb-945a-a756a608caa5.png)
 
![2](https://user-images.githubusercontent.com/64347529/121639293-02274d00-ca95-11eb-9a99-b45d9e01796e.png)

![3](https://user-images.githubusercontent.com/64347529/121639294-02274d00-ca95-11eb-92c6-e0fd1307a618.png)

![4](https://user-images.githubusercontent.com/64347529/121639295-02bfe380-ca95-11eb-885e-b1c2b284bab5.png)

![5](https://user-images.githubusercontent.com/64347529/121639297-02bfe380-ca95-11eb-8221-5dedcc60d536.png)

![6](https://user-images.githubusercontent.com/64347529/121639300-03587a00-ca95-11eb-936a-4c5430e62645.png)

![7](https://user-images.githubusercontent.com/64347529/121639301-03587a00-ca95-11eb-9ede-d56bfc30c43e.png)
